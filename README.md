# US Stock Price Downloader

米国株価のヒストリカルデータをCSVでダウンロードするWindowsアプリケーション

## 主な機能

- S&P 500銘柄の株価データを自動ダウンロード
- 複数銘柄の並列ダウンロードによる高速処理（デフォルト3並列）
- 柔軟なシンボル形式対応（NYSE、NASDAQ等）
- エラー発生時の自動リトライ機能
- 詳細なログ出力
- CSVフォーマットでのデータ保存

## 開発環境

- .NET 8.0
- C#
- Windows

## セットアップ

1. リポジトリをクローン:
```bash
git clone [your-repository-url]
```

2. プロジェクトディレクトリに移動:
```bash
cd USStockDownloader
```

3. アプリケーションをビルド:
```bash
dotnet build
```

4. アプリケーションを実行:
```bash
dotnet run
```

## 設定オプション

アプリケーションは以下の設定オプションをサポートしています：

### ダウンロード設定（DownloadOptions）

| オプション | 説明 | デフォルト値 |
|------------|------|--------------|
| MaxConcurrentDownloads | 並列ダウンロード数 | 3 |
| RetryCount | エラー時の最大リトライ回数 | 5 |
| RetryDelaySeconds | リトライ間の待機時間（秒） | 2 |
| OutputDirectory | CSVファイルの出力ディレクトリ | ./Data |

### 使用例

1. デフォルト設定での実行:
```bash
dotnet run
```

2. 並列ダウンロード数を変更して実行:
```bash
dotnet run -- --MaxConcurrentDownloads 5
```

3. 特定の銘柄のみダウンロード:
```bash
dotnet run -- --Symbols AAPL,MSFT,GOOGL
```

## エラーコードと対処方法

### 一般的なエラー

| エラーコード | 説明 | 対処方法 |
|--------------|------|----------|
| E001 | シンボル形式が無効 | シンボルの形式を確認し、正しい形式（例：AAPL、BRK.B）で入力してください |
| E002 | ネットワークエラー | インターネット接続を確認し、再試行してください |
| E003 | レート制限エラー | しばらく待ってから再試行してください |
| E404 | データが見つかりません | シンボルが正しいか確認してください |
| E500 | サーバーエラー | しばらく待ってから再試行してください |

### トラブルシューティング

1. ダウンロードが失敗する場合:
   - インターネット接続を確認
   - シンボルの形式が正しいか確認
   - エラーログを確認（`logs/error.log`）

2. パフォーマンスが低い場合:
   - 並列ダウンロード数を調整
   - ネットワーク速度を確認
   - 他のアプリケーションのネットワーク使用を確認

## ライセンス

MIT
